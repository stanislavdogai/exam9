{% extends 'base.html' %}

{% block content %}
    <h1>Название: {{ album.name }}</h1>
    <p>Описание: {{ album.description }}</p>
    <p>Автор альбома: {{ album.author_album }}</p>
    {% if perms.webapp.delete_album or user in photo.author %}
    <a class="btn btn-secondary" href="{% url 'web:album_delete' album.pk %}">Удалить альбом</a>
    {% endif %}
    {% if perms.webapp.delete_album or user in photo.author %}
    <a class="btn btn-secondary" href="{% url 'web:album_update' album.pk %}">Редактировать</a>
    {% endif %}
    {% if user not in album.favorites.all %}
        <button class="btn btn-secondary" id="favoritebtn" onclick="favorite_album(event)" data-id="{{ album.id }}" data-photo-url="{% url 'api:favorite_album' album.pk %}">В избранное</button>
    {% else %}
        <button class="btn btn-secondary" id="favoritebtn" onclick="favorite_album(event)" data-id="{{ album.id }}" data-photo-url="{% url 'api:favorite_album' album.pk %}">Удалить из избранного</button>
    {% endif %}
<div class="row mt-5">
    {% for photo in photos %}
      <div class="col-sm-6">
          <a class="pictureindex" href="{% url 'web:photo_detail' photo.pk %}"><img src="{{ photo.photography.url }}" class="card-img-top" alt="Должна быть фотография"></a>
        <div class="card-body">
          <h5 class="card-title">Автор: {{ photo.author }}</h5>
          <p class="card-text">Подпись: {{ photo.signature }}</p>
          <p class="card-text"><small class="text-muted">Дата создания: {{ photo.created_at.date }}</small></p>
                {% if perms.webapp.delete_photo or user in photo.author %}
             <a class="btn btn-secondary" href="{% url 'web:photo_delete' photo.pk %}">Удалить пост</a>
                {% endif %}
            {% if perms.webapp.change_photo or user in photo.author %}
            <a class="btn btn-secondary" href="{% url 'web:photo_update' photo.pk %}">Редактировать</a>
            {% endif %}
        </div>
      </div>
    {% endfor %}
</div>
{% endblock %}